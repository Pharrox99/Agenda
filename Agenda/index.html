<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Calendrier Année Scolaire 2025-2026</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f0f4f8; }
h2 { margin-bottom: 15px; color:#333; }
input, button, select { margin: 5px; padding: 7px; font-size:14px; }
button { cursor: pointer; border:none; border-radius:5px; color:#fff; }
#btnCours { background-color:#4CAF50; }
#btnControle { background-color:#f44336; }
#btnAutre { background-color:#2196F3; }
#calendrier { display: flex; overflow-x: auto; gap: 20px; padding-bottom: 20px; }
.mois { min-width: 400px; flex-shrink: 0; background: #fff; border-radius:8px; border:1px solid #ccc; padding:8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
.mois h3 { text-align: center; margin-bottom: 5px; }
.header-jours { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; font-weight: bold; margin-bottom: 5px; color:#555; }
.calendrier-mois { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
.jour { background: #f9f9f9; border-radius:5px; border:1px solid #ddd; padding:5px; min-height:70px; position: relative; font-size:13px; word-wrap: break-word; }
.jour strong { display:block; margin-bottom:3px; }
.evenement { padding:3px 5px; margin:2px 0; border-radius:4px; color:#fff; font-size:11px; position:relative; word-wrap: break-word; }
.cours { background-color: #4CAF50; }
.controle { background-color: #f44336; }
.revision { background-color: #FF9800; }
.autre { background-color: #2196F3; }
.suppr { position:absolute; top:2px; right:3px; cursor:pointer; font-weight:bold; font-size:12px; }
.container { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:20px; }
.block { background:#fff; border-radius:8px; padding:10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<h2>Calendrier Année Scolaire 2025-2026</h2>

<div class="container">
  <div class="block">
    <label>Cours : <input type="text" id="cours"></label><br>
    <label>Mois : 
      <select id="moisCours">
        <option value="8">Septembre</option><option value="9">Octobre</option>
        <option value="10">Novembre</option><option value="11">Décembre</option>
        <option value="0">Janvier</option><option value="1">Février</option>
        <option value="2">Mars</option><option value="3">Avril</option>
        <option value="4">Mai</option><option value="5">Juin</option>
        <option value="6">Juillet</option><option value="7">Août</option>
      </select>
    </label>
    <label>Jour : <input type="number" id="jourCours" min="1" max="31"></label><br>
    <button id="btnCours">Ajouter Cours</button>
  </div>

  <div class="block">
    <label>Contrôle : <input type="text" id="controle"></label><br>
    <label>Mois : 
      <select id="moisControle">
        <option value="8">Septembre</option><option value="9">Octobre</option>
        <option value="10">Novembre</option><option value="11">Décembre</option>
        <option value="0">Janvier</option><option value="1">Février</option>
        <option value="2">Mars</option><option value="3">Avril</option>
        <option value="4">Mai</option><option value="5">Juin</option>
        <option value="6">Juillet</option><option value="7">Août</option>
      </select>
    </label>
    <label>Jour : <input type="number" id="jourControle" min="1" max="31"></label><br>
    <button id="btnControle">Ajouter Contrôle</button>
  </div>

  <div class="block">
    <label>Événement : <input type="text" id="autre"></label><br>
    <label>Mois : 
      <select id="moisAutre">
        <option value="8">Septembre</option><option value="9">Octobre</option>
        <option value="10">Novembre</option><option value="11">Décembre</option>
        <option value="0">Janvier</option><option value="1">Février</option>
        <option value="2">Mars</option><option value="3">Avril</option>
        <option value="4">Mai</option><option value="5">Juin</option>
        <option value="6">Juillet</option><option value="7">Août</option>
      </select>
    </label>
    <label>Jour : <input type="number" id="jourAutre" min="1" max="31"></label><br>
    <button id="btnAutre">Ajouter Événement</button>
  </div>
</div>

<div id="calendrier"></div>

<script>
let evenements = JSON.parse(localStorage.getItem('evenements')) || [];
const moisNoms = ["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];
const joursSemaine = ["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];

function genererId(){ return 'id-'+Date.now()+'-'+Math.floor(Math.random()*1000); }
function sauvegarder() { localStorage.setItem('evenements', JSON.stringify(evenements)); }
function getAnnee(mois){ return (mois>=8) ? 2025 : 2026; }

function afficherCalendrier(){
  const calendrier = document.getElementById('calendrier');
  calendrier.innerHTML = '';
  for(let m=8; m<=19; m++){
    let mois = m%12;
    let annee = getAnnee(mois);
    const divMois = document.createElement('div');
    divMois.className = 'mois';
    divMois.innerHTML = `<h3>${moisNoms[mois]} ${annee}</h3>`;

    const header = document.createElement('div');
    header.className='header-jours';
    joursSemaine.forEach(j => { const d=document.createElement('div'); d.textContent=j; header.appendChild(d); });
    divMois.appendChild(header);

    const grid = document.createElement('div');
    grid.className='calendrier-mois';
    const nbJours = new Date(annee, mois+1,0).getUTCDate();
    for(let i=1;i<=nbJours;i++){
      const divJour=document.createElement('div');
      divJour.className='jour';
      divJour.innerHTML=`<strong>${i}</strong>`;
      evenements.filter(ev=>{
        const evDate=new Date(ev.date);
        return evDate.getUTCDate()===i && evDate.getUTCMonth()===mois && evDate.getUTCFullYear()===annee;
      }).forEach(ev=>{
        const evDiv=document.createElement('div');
        evDiv.className='evenement '+(ev.type==='revision'?'revision':ev.type);
        evDiv.textContent=ev.nom;
        const btn=document.createElement('span');
        btn.textContent='×';
        btn.className='suppr';
        btn.onclick=()=>{
          if(ev.type==='revision' && ev.idCours){
            evenements=evenements.filter(e=>!(e.type==='revision' && e.idCours===ev.idCours));
          }else{
            evenements=evenements.filter(e=>e!==ev);
          }
          sauvegarder();
          afficherCalendrier();
        };
        evDiv.appendChild(btn);
        divJour.appendChild(evDiv);
      });
      grid.appendChild(divJour);
    }
    divMois.appendChild(grid);
    calendrier.appendChild(divMois);
  }
}

// Boutons
document.getElementById('btnCours').onclick = function(){
  const nom=document.getElementById('cours').value;
  const jour=parseInt(document.getElementById('jourCours').value);
  const mois=parseInt(document.getElementById('moisCours').value);
  if(!nom||!jour){ alert("Remplis le nom et le jour"); return; }
  const annee=getAnnee(mois);
  const d=new Date(Date.UTC(annee,mois,jour));
  const idCours=genererId();
  [1,3,7,14,30,90].forEach(j=>{
    let copie=new Date(d.getTime());
    copie.setUTCDate(copie.getUTCDate()+j);
    evenements.push({nom:"Réviser "+nom, date:copie.toISOString(), type:'revision', idCours:idCours});
  });
  sauvegarder(); afficherCalendrier();
};

document.getElementById('btnControle').onclick = function(){
  const nom=document.getElementById('controle').value;
  const jour=parseInt(document.getElementById('jourControle').value);
  const mois=parseInt(document.getElementById('moisControle').value);
  if(!nom||!jour){ alert("Remplis le nom et le jour"); return; }
  const annee=getAnnee(mois);
  const d=new Date(Date.UTC(annee,mois,jour));
  evenements.push({nom:nom, date:d.toISOString(), type:'controle'});
  sauvegarder(); afficherCalendrier();
};

document.getElementById('btnAutre').onclick = function(){
  const nom=document.getElementById('autre').value;
  const jour=parseInt(document.getElementById('jourAutre').value);
  const mois=parseInt(document.getElementById('moisAutre').value);
  if(!nom||!jour){ alert("Remplis le nom et le jour"); return; }
  const annee=getAnnee(mois);
  const d=new Date(Date.UTC(annee,mois,jour));
  evenements.push({nom:nom, date:d.toISOString(), type:'autre'});
  sauvegarder(); afficherCalendrier();
};

afficherCalendrier();
</script>
</body>
</html>

